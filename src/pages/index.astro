---
import Layout from "../layouts/Layout.astro";
import { Image } from "astro:assets";
// @ts-ignore
import { Icon } from "astro-icon/components";

import Carousel from "@components/Carousel";
import Banner from "@components/Banner";
import Nav from "@components/Nav";
import Music from "@components/Music";

import matthewImg from "../assets/images/matthew.png";
import barcodeImg from "../assets/images/barcode.webp";

import storyImg1 from "../assets/images/story1.jpg";
import storyImg2 from "../assets/images/story2.jpg";
import storyImg3 from "../assets/images/story3.jpg";

import galleryImg1 from "../assets/images/gallery/gallery1.jpg";
import galleryImg2 from "../assets/images/gallery/gallery2.jpg";
import galleryImg3 from "../assets/images/gallery/gallery3.jpg";
import galleryImg4 from "../assets/images/gallery/gallery4.jpg";
import galleryImg5 from "../assets/images/gallery/gallery5.jpg";
import galleryImg6 from "../assets/images/gallery/gallery6.jpg";
import galleryImg7 from "../assets/images/gallery/gallery7.jpg";
import galleryImg8 from "../assets/images/gallery/gallery8.jpg";
import galleryImg9 from "../assets/images/gallery/gallery9.jpg";
import galleryImg10 from "../assets/images/gallery/gallery10.jpg";
import galleryImg11 from "../assets/images/gallery/gallery11.jpg";
import galleryImg12 from "../assets/images/gallery/gallery12.jpg";
import galleryImg13 from "../assets/images/gallery/gallery13.jpg";
import galleryImg14 from "../assets/images/gallery/gallery14.jpg";
import galleryImg15 from "../assets/images/gallery/gallery15.jpg";
import galleryImg16 from "../assets/images/gallery/gallery16.jpg";
import galleryImg17 from "../assets/images/gallery/gallery17.jpg";

const galleryImgs = [
  galleryImg1,
  galleryImg2,
  galleryImg3,
  galleryImg4,
  galleryImg5,
  galleryImg6,
  galleryImg7,
  galleryImg8,
  galleryImg9,
  galleryImg10,
  galleryImg11,
  galleryImg12,
  galleryImg13,
  galleryImg14,
  galleryImg15,
  galleryImg16,
  galleryImg17,
];

import astroLogo from "../assets/images/AstroMediaLogo.svg";

import config from "@data/config.json";

const currentYear = new Date().getFullYear();
const difference = currentYear - 2020;
---

<Layout title={config.businessName}>
  <section class="bg-slate-100 w-full overflow-hidden">
    <div class="absolute top-4 right-4 z-40">
      <Music client:only="react" />
    </div>
    <div class="flex flex-col max-w-[900px] relative h-full mx-auto p-4">
      <div
        id="boxLogo"
        class="bg-primary uppercase opacity-0 -translate-x-[1000px] text-white w-fit px-12 py-6 text-7xl flex flex-col gap-0 transition-all font-extrabold max-md:text-4xl max-md:p-2 hover:z-50"
      >
        <h1>thor & co</h1>
        <h1>building</h1>
      </div>
      <Image
        id="matthewImg"
        src={matthewImg}
        alt="matthew"
        class="pointer-events-none opacity-0 translate-x-[1000px] absolute bottom-0 max-md:-bottom-[10vh] w-[110vh] 2xl:w-[90vh] right-0 max-md:-left-1/2 max-w-none grayscale-[0.7] max-md:grayscale-[1]"
      />
      <h1
        id="localLegend"
        class="text-center font-[yellowTail] max-md:text-primary uppercase font-light rotate-12 absolute top-8 right-8 text-2xl max-md:text-xs max-md:top-16 max-md:right-8 opacity-0"
      >
        Local Legend of <br /> Avondale!
      </h1>
      <div
        class="flex flex-col gap-2 items-start scale-100 max-md:scale-100 origin-top-left mt-4 max-md:mt-8 z-10"
      >
        <div
          id="blurb"
          class="flex flex-col gap-1 items-center font-extrabold uppercase w-fit leading-none -translate-x-[1000px] opacity-0"
        >
          <div class="bg-primary p-1 text-white text-2xl">Meet</div>
          <div class="flex flex-col items-center">
            <h1 class="text-[3rem]">Matthew</h1>
            <h1 class="text-[2.3rem]">Aaron-Fasa</h1>
            <h1 class="text-[4.3rem]">Fainuu</h1>
          </div>
          <div class="w-[16rem] h-4 bg-primary"></div>
          <div class="flex items-center">
            <h1 class="text-[4rem]">{Math.min(difference, 9)}+</h1>
            <div class="flex flex-col justify-center items-center">
              <h1 class="text-[3rem]">years</h1>
              <h1 class="text-[1.6rem]">experience</h1>
            </div>
          </div>
          <div class="w-[16rem] h-4 bg-primary"></div>
          <div class="w-fit py-4">
            <h1
              class="font-[yellowTail] text-center uppercase font-light -rotate-6 text-lg text-primary"
            >
              Strength of Thor <br /> Heart of Home!
            </h1>
          </div>
        </div>
        <div class="self-start flex flex-col gap-4">
          <div
            class="flex flex-col uppercase text-white gap-1 text-sm font-extrabold"
          >
            <h1 class="bg-black w-fit p-1 stat opacity-0 -translate-x-24">
              Proud SAMON FAMILY MAN,
            </h1>
            <h1 class="bg-black w-fit p-1 stat opacity-0 -translate-x-24">
              Forging long last connections
            </h1>
            <h1 class="bg-black w-fit p-1 stat opacity-0 -translate-x-24">
              to create a resilient community
            </h1>
          </div>
          <a
            id="heroContact"
            href="#contact"
            class="uppercase opacity-0 translate-y-[1000px] hover:bg-secondary/90 transition-all font-extrabold bg-secondary text-white text-2xl p-4 w-fit"
            >Contact Me Today</a
          >
        </div>
      </div>
      <Image
        id="barcode"
        src={barcodeImg}
        alt="barcode"
        class="absolute bottom-4 right-4 w-16 contrast-75"
      />
      <Nav client:only="react" />
    </div>
  </section>
  <section
    id="story"
    class="grid grid-cols-5 max-md:grid-cols-1 max-md:gap-8 max-w-screen-xl mx-auto gap-16 py-16 px-4"
  >
    <div class="flex col-span-1 h-fit items-center gap-2">
      <Icon name="game-icons:thor-hammer" class="text-primary text-lg" />
      <h1 class="uppercase text-sm font-bold">My Story</h1>
    </div>
    <div class="flex col-span-4 flex-col text-2xl gap-16 max-md:gap-8">
      <p>
        Matthew Aaron-Fasa Fainuu, a proud Samoan and the cherished local legend
        of Avondale, launched Thor & Co Building amid the challenges of the
        COVID-19 pandemic. <br /><br />With a steadfast commitment to his
        community, Matthew has not only built structures but has also forged
        strong connections with his clients, significantly enhancing the
        communal spirit. <br /><br />A devoted family man at heart, he
        integrates his values of kinship and integrity into every project,
        striving to strengthen and uplift the neighbourhood one build at a time. <br
        /><br />His approach goes beyond construction; it's about creating
        lasting bonds and a resilient community foundation.
      </p>
      <div class="grid grid-cols-2 gap-4">
        <div class="grid grid-cols-1 grid-rows-2 gap-4">
          <Image
            src={storyImg1}
            alt="profile1"
            class="object-cover w-full h-full object-left"
          />
          <Image
            src={storyImg2}
            alt="profile2"
            class="object-cover w-full h-full"
          />
        </div>
        <Image
          src={storyImg3}
          alt="profile3"
          class="object-cover w-full h-full"
        />
      </div>
    </div>
  </section>
  <section
    id="services"
    class="grid grid-cols-5 max-md:grid-cols-1 max-md:gap-8 max-w-screen-xl mx-auto gap-16 pb-16 px-4"
  >
    <div class="flex col-span-1 h-fit items-center gap-2">
      <Icon name="game-icons:thor-hammer" class="text-primary text-lg" />
      <h1 class="uppercase text-sm font-bold">My Services</h1>
    </div>
    <div class="flex col-span-4 flex-col text-2xl gap-16 max-md:gap-8">
      <p>
        Thor & Co Building focuses on anything to do with house, from the piles
        and concrete to the roof.<br /><br />
        Services include: house renovations, new kitchens and bathrooms, cladding
        work and repairs, house maintenance, all aspects of building, gib work, replacing
        windows and doors, waterblasting, footpaths, driveways, and house washes,
        digger operators, and landscaping.
      </p>
    </div>
  </section>
  <section id="gallery" class="overflow-x-hidden flex flex-col gap-4">
    <div
      class="flex w-full h-96 max-md:h-52 gap-8 max-md:gap-2 justify-center -translate-x-52 max-md:-translate-x-32 galleryRow items-center"
    >
      {
        galleryImgs
          .slice(0, galleryImgs.length / 2)
          .map((img) => (
            <Image
              src={img}
              alt="gallery"
              class="object-contain w-52 max-md:w-24 h-full"
            />
          ))
      }
    </div>
    <div
      class="flex w-full h-96 max-md:h-32 gap-8 max-md:gap-2 justify-center translate-x-52 max-md:translate-x-32 galleryRow items-center"
    >
      {
        galleryImgs
          .slice(galleryImgs.length / 2)
          .map((img) => (
            <Image
              src={img}
              alt="gallery"
              class="object-contain w-52 max-md:w-24 h-full"
            />
          ))
      }
    </div>
  </section>

  <section
    id="contact"
    class="flex flex-col gap-16 py-16 max-w-screen-lg mx-auto px-2"
  >
    <h1 class="text-9xl uppercase font-extrabold text-center">Let's Talk</h1>
    <div class="flex flex-col gap-5 items-center">
      <p class="text-center italic text-2xl">
        via my phone number: <span
          ><a
            class="link link-primary"
            href={config.socials.filter((social) => social.name == "phone")[0]
              .url}
          >
            {
              config.socials
                .filter((social) => social.name == "phone")[0]
                .url.split("+64")[1]
            }</a
          ></span
        >
      </p>
      <p class="text-center text-2xl italic">or via the form below</p>
    </div>

    <form
      name="contact"
      method="POST"
      data-netlify="true"
      class="bg-neutral p-8 rounded-2xl py-12 flex flex-col gap-2"
    >
      <label for="fname" class="text-white">First name</label>
      <input
        autocomplete="on"
        type="text"
        id="fname"
        name="firstname"
        class="form-input px-4 py-3 w-full rounded bg-stone-100"
      />
      <label for="lname" class="text-white">Last name</label>
      <input
        autocomplete="on"
        type="text"
        id="lname"
        name="lastname"
        class="form-input px-4 py-3 w-full rounded bg-stone-100"
      />
      <label for="email" class="text-white">Email</label>
      <input
        autocomplete="on"
        type="email"
        id="email"
        name="email"
        class="form-input px-4 py-3 w-full rounded bg-stone-100"
      />
      <label for="message" class="text-white">Message</label>
      <textarea
        name="message"
        id="message"
        class="form-input px-4 py-3 rounded w-full bg-stone-100"
        cols="30"
        rows="10"></textarea>
      <div class="flex w-full justify-center my-6">
        <input type="submit" value="Submit" class="btn btn-secondary" />
      </div>
    </form>
  </section>

  <footer class="flex flex-col bg-primary text-white py-8 max-md:pb-24">
    <Banner client:only="react" />
    <ul class="menu menu-horizontal mx-auto mb-8 max-md:mb-4">
      {
        config.socials.map((social: any) => (
          <li>
            <a href={social.url} target="_blank" aria-label={social.label}>
              <Icon name={social.icon} class="text-2xl" />
            </a>
          </li>
        ))
      }
    </ul>
    <div class="flex justify-between px-4 max-md:flex-col max-md:items-center">
      <h1>@ {config.businessName}. All rights reserved.</h1>

      <h1 class="flex items-center gap-1 max-md:self-center">
        Made possible by <a
          href="https://astromedia.dev"
          class="link"
          target="_blank">Astro Media</a
        ><Image
          class="w-5"
          src={astroLogo}
          width={10}
          height={10}
          alt="digital agency"
        />
      </h1>
    </div>
  </footer>
</Layout>

<script>
  import Lenis from "lenis";
  import gsap from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  const lenis = new Lenis();

  lenis.on("scroll", ScrollTrigger.update);

  gsap.ticker.add((time) => {
    lenis.raf(time * 1000);
  });

  gsap.ticker.lagSmoothing(0);

  const heroTimeline = gsap.timeline({ delay: 0.5 });

  heroTimeline
    .to("#boxLogo", {
      x: 0,
      opacity: 1,
    })
    .to(
      "#blurb",
      {
        x: 0,
        opacity: 1,
      },
      0.1
    )
    .to(
      ".stat",
      {
        x: 0,
        opacity: 1,
        stagger: 0.2,
      },
      0.2
    )
    .to(
      "#heroContact",
      { y: 0, opacity: 1, ease: "power3.out", duration: 0.5 },
      "0"
    )
    .to(
      "#matthewImg",
      {
        x: 0,
        opacity: 1,
        ease: "power3.out",
      },
      0.2
    )
    .to("#localLegend", {
      opacity: 1,
    });

  gsap.to(".galleryRow", {
    scrollTrigger: {
      trigger: "#gallery",
      start: "top 50%",
      end: "bottom 50%",
      scrub: true,
    },
    x: 0,
  });
</script>
